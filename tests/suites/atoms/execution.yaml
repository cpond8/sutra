# Execution Control Atom Tests
# Tests for execution flow and control atoms

- name: "do single expression"
  input: "(do 42)"
  expected: "42"

- name: "do multiple expressions returns last"
  input: "(do 1 2 3 42)"
  expected: "42"

- name: "do with side effects"
  input: "(do (core/set! (path x) 10) (core/set! (path y) 20) (+ (core/get (path x)) (core/get (path y))))"
  expected: "30"

- name: "do empty"
  input: "(do)"
  expected: "nil"

- name: "error atom with message"
  input: '(error "custom error message")'
  expect_error_code: "EVAL_ERROR"

- name: "apply with function and arguments"
  input: "(apply + (list 1 2 3))"
  expected: "6"

- name: "apply with single argument"
  input: "(apply len (list (list 1 2 3)))"
  expected: "3"

# Note: These are special form atoms that require special handling
# They don't follow the normal arity rules for pure/stateful atoms
